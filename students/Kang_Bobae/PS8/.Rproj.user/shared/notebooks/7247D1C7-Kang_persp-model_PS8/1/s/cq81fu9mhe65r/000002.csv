"0","# remove missing values"
"0","simpson <- simpson %>%"
"0","  na.omit()"
"0","# binarize categorical predictors, for prediction part"
"0","simpson_pred <- simpson %>%"
"0","  model.matrix(~ ., data=.) %>% "
"0","  as.data.table() %>%"
"0","  select(-`(Intercept)`)"
"0","# simplify colnames"
"0","colnames(simpson_pred)  <- c('guilt', 'dem', 'rep', 'ind', 'age', 'educ_hs', 'educ_not_hs', 'educ_ref', 'educ_some_col',"
"0","                        'female', 'black', 'hispanic', 'inc_30to50', 'inc_50to75', 'inc_over75', 'inc_ref', 'inc_under15')"
"0","# split data into train and test sets, for prediction part  "
"0","simpson_split <- resample_partition(simpson_pred, c(test = 0.3, train = 0.7))"
"0","simpson_train <- simpson_pred[simpson_split$train$idx]"
"0","simpson_test <- simpson_pred[simpson_split$test$idx]"
